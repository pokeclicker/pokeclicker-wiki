<!-- ko ifnot: Routes.regionRoutes.find(r => r.routeName == Wiki.pageName()) -->
<h2>Route not found...</h2>
<!-- /ko -->
<div data-bind="with: Routes.regionRoutes.find(r => r.routeName == Wiki.pageName())">
  <div class="float-lg-end col-lg-4 m-2">
    <table class="table table-hover table-striped table-bordered">
      <thead>
        <tr>
          <th class="text-center" colspan="2" data-bind="text: Wiki.pageName()"></th>
        </tr>
      </thead>
      <tbody>
        <!-- ko with: Wiki.gameHelper.getRouteOverlaySVG($data.number, $data.region, $data.subRegion ?? 0), as: 'filePath' -->
        <tr data-bind="with: Wiki.gameHelper.overlaySVG(), as: 'overlaySVG'">
          <td colspan="2">
            <div id="map-container">
              <div id="map-overlay" data-bind="html: overlaySVG"></div>
              <img class="w-100" width="1600" data-bind="attr: {
                src:`images/${filePath}.png`
              }" />
            </div>
          </td>
        </tr>
        <!-- /ko -->
        <tr>
          <td>Region</td>
          <td data-bind="text: GameConstants.camelCaseToString(GameConstants.Region[$data.region])"></td>
        </tr>
        <tr>
          <td>Sub Region</td>
          <td data-bind="text: SubRegions.list[$data.region][$data.subRegion ?? 0].name"></td>
        </tr>
      </tbody>
    </table>
  </div>
  <div>
      <h3>Base HP:</h3>
      <p data-bind="text: Math.round(PokemonFactory.routeHealth($data.number, $data.region)).toLocaleString()"></p>
  </div>
  <div>
    <h3>Egg Steps:</h3>
    <p data-bind="text: +Math.sqrt(MapHelper.normalizeRoute($data?.number, $data.region)).toFixed(2)"></p>
  </div>
  <div>
    <h3>Roamer Chance:</h3>
    <p data-bind="text: (() => {
      const region = $data.region;
      const routes = Routes.getRoutesByRegion($data.region).map(r => MapHelper.normalizeRoute(r.number, region));
      const routeNum = MapHelper.normalizeRoute($data?.number, region);
      const roamingChance = ((max, min, maxRoute, minRoute) => Math.floor(max + ( (min - max) * (maxRoute - routeNum) / (maxRoute - minRoute))))(GameConstants.ROAMING_MAX_CHANCE, GameConstants.ROAMING_MIN_CHANCE, Math.max(...routes), Math.min(...routes));
      return '1/' + roamingChance.toLocaleString();
    })()"></p>
  </div>
  <div>
    <h3>Encounters</h3>
    <!-- ko foreach: Object.entries($data.pokemon) -->
      <!-- ko if: $data[1].length -->
      <h4 data-bind="text: GameConstants.camelCaseToString($data[0])"></h4>
      <div data-bind="foreach: $data[1]">
        <!-- ko if: typeof $data == 'string' -->
          <div class="custom-tooltip">
            <img width="32px" data-bind="attr: {src: './pokeclicker/docs/assets/images/pokemon/' + pokemonList.find((p) => p.name == $data).id + '.png'}"/>
            <a class="badge text-bg-secondary" href="#!" data-bind="text: $data, attr: { href: `#!Pokemon/${$data}` }"></a>
            <span class="custom-tooltip-content text-nowrap mb-1">
              <pokemon-summary params="pokemonData: pokemonList.find((p) => p.name == $data)"></pokemon-summary>
            </span>
          </div>
        <!-- /ko -->
        <!-- ko ifnot: typeof $data == 'string' -->
            <!-- ko foreach: $data.pokemon -->
              <a class="badge text-bg-secondary" href="#!" data-bind="text: `${$data} ðŸ”’`, attr: { href: `#!Pokemon/${$data}` },
              tooltip: {
                  title: $parent.req.hint(),
                  html: false,
                  placement: 'bottom',
                  trigger: 'hover'
              }"></a>
            <!-- /ko -->
        <!-- /ko -->
      </div>
      <br/>
      <!-- /ko -->
    <!-- /ko -->
  </div>
</div>